<h2>Manage <%= @d.name %> Records</h2>

<%# columns = [{:type => 'html', :class => "first"}, {:type => 'html'}, {:type => 'html'}, {:type => 'html'},{:type => 'html'},{:type => 'html'},{:type => 'html'},{:type => 'html'},{:type => nil, :class => "last"}] %>
<%= link_to "Add Record", new_custom_path(:d => @d.id)%>

<%= render :inline => datatable(nil, {:ajax_source => "#{datatable_customs_path(:d => @d.id)}", :processing => image_tag("datatable_spinner.gif") }) %>

<table id="<%= @d.id %>" class="datatable">
  <thead>
  <tr>
    <% @d.ds_elements.each do |ds_element|%>
    <th><%= ds_element.name %></th>
    <% end %>
    <th>Position</th>
    <th>Move Up</th>
    <th>Move Down</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>
  </thead>
  <tbody></tbody>
  <!-- <% @records.each do |rec| %>
  <tr>
    <% @d.ds_elements.each do |ds_element|%>
    <td>
      <% if ds_element.ftype == "Text"%>
        <%= truncate(rec.send(ds_element.key).gsub(/<\/?[^>]*>/, "")) %>
      <% elsif ds_element.ftype == "Image" %>
        <%= image_tag rec.send(ds_element.key).url(:small) %>
      <% elsif ds_element.ftype == "DateTime" %>
        <%= rec.send(ds_element.key).strftime(@setting.date_format) if rec.send(ds_element.key) %>
      <% else %>
        <%= rec.send(ds_element.key)%>
      <% end %>
    </td>
    <% end %>
    <td><%= rec.position.to_i %></td>
    <td><%= button_to "Up", move_down_custom_path(rec, :d => @d.id)%></td>
    <td><%= button_to "Down", move_up_custom_path(rec, :d => @d.id)%></td>
    <td><%= link_to "Show", custom_path(rec, :d => @d.id) %></td>
    <td><%= link_to "Edit", edit_custom_path(rec, :d => @d.id) %></td>
    <td><%= link_to "Destroy", custom_path(rec, :d => @d.id), :confirm => 'Are you sure?', :method => :delete %></td>    
  </tr>
  <% end %> -->
</table>

<%#= will_paginate @records, :renderer => WillPaginate::ViewHelpers::LinkRenderer, :class => "right" %>

